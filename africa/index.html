<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Africa</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="js/jquery-jvectormap-2.0.3.min.js"></script>
    <script src="js/jquery-jvectormap-africa-mill.js"></script>
    <link rel="stylesheet" href="css/jquery-jvectormap-2.0.3.css" media="screen">

    <style>
        #map {
            height: 450px;
            background:transparent;
        }
    </style>
</head>

<body>
    <div id="map">
    </div>
    <div class="info">
        <img class="flagspace">
        <table class="info">
            <tr>
                <th>Country Name</th>
                <td id="country"> </td>
            </tr>
            <tr>
                <th>Capital City</th>
                <td id="capital"> </td>
            </tr>
            <tr>
                <th>Population</th>
                <td id="population"> </td>
            </tr>
            <tr>
                <th>Language</th>
                <td id="language"> </td>
            </tr>
            <tr>
                <th>Area</th>
                <td id="area"> </td>
            </tr>

        </table>
    </div>

    <script>
        var countriesByCode = {
            "DZ": "Algeria",
            "BF": "Burkina Faso",
            "DJ": "Djibouti",
            "BI": "Burundi",
            "BJ": "Benin",
            "ZA": "South Africa",
            "BW": "Botswana",
            "ET": "Ethiopia",
            "RT": "Rwanda",
            "TZ": "Tanzania",
            "GQ": "Eq. Guinea",
            "NA": "Namibia",
            "NE": "Niger",
            "NG": "Nigeria",
            "TN": "Tunisia",
            "LR": "Liberia",
            "LS": "Lesotho",
            "ZW": "Zimbabwe",
            "TG": "Togo",
            "ER": "Eritrea",
            "LY": "Lybia",
            "GW": "Guinea-Bassau",
            "ZM": "Zambia",
            "CI": "Cote d'Ivoire",
            "EH": "W.Sahara",
            "CM": "Cameroon",
            "EG": "Egypt",
            "SL": "Sierra Leone",
            "CG": "Congo",
            "CF": "Central African Rep.",
            "AO": "Angola",
            "CD": "Dem. Rep. Congo",
            "GA": "Gabon",
            "GN": "Guinea",
            "GM": "Gambia",
            "XS": "Somaliland",
            "CV": "Cape Verde",
            "GH": "Ghana",
            "SZ": "Swaziland",
            "MG": "Madagascar",
            "MA": "Morocco",
            "KE": "Kenya",
            "SS": "S.Sudan",
            "ML": "Mali",
            "KM": "Comoros",
            "ST": "Sao Tome and Principe",
            "MW": "Malawi",
            "SO": "Somalia",
            "SN": "Senegal",
            "MR": "Mauritania",
            "UG": "Uganda",
            "SD": {
                country_name: "Sudan",
                capital_city: "Khartoum"
            },
            "MZ": {
                country_name: "Mozambique",
                capital_city: "Maputo",
                population: "24,692,144",
                language: "Portuguese",
                area: "309,496 sq mi",
                flag: 'images/mozambique.png'
            },
        }

        var map = new jvm.Map({
            map: "africa_mill",
            container: $("#map"),
            onRegionClick: function(e, code) {
                console.log("clicked", code);
                var country = countriesByCode[code];

                displayCountryDetails(country);
            },
            series: {
                regions: [{
                    attribute: 'fill'
                }]
            }
        })

        function displayCountryDetails(country) {

          var url = "https://restcountries.africa/rest/v1/"
 + country;
            //call out the desctiptions to see if they show up
          //  console.log(country.capital_city, country.country_name, country.population, country.language);

            //define the div where everything goes
            var info = document.querySelector("#info");
            //change the text content
            $.get(url, display);

            function display (results) {
              document.querySelector(".country").textContent = results.capital;
              document.querySelector(".capital").textContent = results.Year;
              document.querySelector(".population").textContent = results.Rating;
              document.querySelector(".language").textContent = results.Runtime;
              document.querySelector(".area").textContent = results.Plot;
            }

            /*document.querySelector("#country").textContent = country.country_name;
            document.querySelector("#capital").textContent = country.capital_city;
            document.querySelector("#population").textContent = country.population;
            document.querySelector("#area").textContent = country.area;
            document.querySelector("#language").textContent = country.language;*/
            //define a space for the img (flags)
            var flagspace = document.querySelector(".flagspace");

            document.querySelector(".flagspace").setAttribute("src", country.flag);

            function getInfo(event) {
                var countrySelected = event.target;
                var capitalCity = selected.code;
                var url = "https://restcountries.africa/rest/v1/" + country;

                $.get(url, display);
            }

            function display(results) {

            }
        }

        map.series.regions[0].setValues({
            ET: "lightyellow",
            DZ: "lightblue",
            EG: "lightgreen",
            BF: "orange",
        })
    </script>
</body>

</html>
